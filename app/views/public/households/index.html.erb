<div class="container">
<h2>ÊäïÁ®ø‰∏ÄË¶ß</h2>
<%= link_to "Êñ∞Ë¶èÁôªÈå≤", new_household_account_path %>
    <% @households.each do |household| %>

     <div class="row">
      <div class="col-md-11">
        <%= household.user.name %>
        <%= household.user.job %>
        <%= household.user.annual_income %>
        <%= household.user.prefecture %>
        <%= household.user.age %>
        </div>
     </div>
     <% sum = household.household_accounts.sum(:target_price) %>
     <%= sum %>
      <div class= "chart" style='width:200px; height: 200px;'>
               <canvas class ="pie" ></canvas>
            </div>
    <%= link_to "ÂâäÈô§", household_path(household),method: :delete %>
      <% if household.favorited_by?(current_user) %>
          <p><%= link_to household_favorites_path(household), method: :delete do %>
          ‚ù§Ô∏è<%= household.favorites.count %>„ÅÑ„ÅÑ„Å≠
          <% end %></p>
        <% else %>
          <p><%= link_to household_favorites_path(household), method: :post do %>
          ü§ç<%= household.favorites.count %>„ÅÑ„ÅÑ„Å≠
          <% end %></p>
        <% end %>
    <% household.household_accounts.each do |household_account| %>

      <%= household_account.category_name %>

       <% end %>

    <!--@households„ÅåÂ§âÂãï„Åô„Çã„Åü„ÇÅ„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„Åß„ÅØ„Å™„Åèview„Å´Ë®òËºâ -->

    <% end %>
</div>


<script>

const category_data = {
  labels: [
    <% @categories.all.each do | category| %>
      '<%= category.category_name %>',
    <% end %>
    ],
  datasets: [
    {
      label: '„Ç´„ÉÜ„Ç¥„É™„ÉºË°®',
      data: [
        <% Category.all.each do | category| %>
          '<%= category.target_price %>',
        <% end %>
      ],
    }
  ]
};

const elements = document.getElementsByClassName('pie');
for(let i = 0; i < elements.length; i++) {
  new Chart(elements[i], {
      type: 'pie',
      data: category_data,
      options: {
    /*    scales: {
          y: {
            beginAtZero: true
          }
        }
        */
      }
    });
}
// elements.forEach((element) => {



// })
// new Chart(xxxxx, {
//     type: 'pie',
//     data: category_data,
//     options: {
//   /*    scales: {
//         y: {
//           beginAtZero: true
//         }
//       }
//       */
//     }
//   });


</script>
