<div class="container-fluie">
	<div class="row">
			<div class = "col-4">
				<h2>目標家計簿</h2>
					<div class= "chart" style='width:200px; height: 200px;'>
               <canvas id ="pie" ></canvas>
          </div>
			</div>

			<div class = "col-3">
				<h3>差額</h3>
				</div>
			<div class = "col-4">
				<h2>現在の家計簿</h2>
				<div class= "chart" style='width:200px; height: 200px;'>
               <canvas id ="chart" ></canvas>
        </div>
			</div>


	</div>
	<div class = "row">
		<div class="col-md-offset-1 col-md-9">

			<h2 class="head-line col-md-6 text-center title_h2 m-4">マイページ</h2>
			 <%= link_to "ユーザー一覧",users_path %>
				<strong>登録情報</strong>
					<% if current_user.name != "guestuser" %>
						<p><%= link_to " 編集する", users_information_edit_path, class: "glyphicon glyphicon-pencil btn btn-success ml-4" %></p>
						<p><%=link_to"参考にしたユーザー",user_followings_path(@user) %></p>
						<p><%=link_to"あなたを参考にしたユーザー",user_followers_path(@user) %></p>
					<% end %>
			<table class="table table-bordered table-condensed" >
				<tbody>
					<tr>
						<td class="info">氏名</td>
						<td class="text-left "><%= @user.name %>
					</tr>
					<tr>
						<td class="info">年代</td>
						<td class="text-left"><%= @user.age %></td>
					</tr>
					<tr>
						<td class="info">仕事</td>
						<td class="text-left"><%= @user.job %></td>
					</tr>
					<tr>
						<td class="info">年収</td>
						<td class="text-left"><%= @user.annual_income %></td>
					</tr>
					<tr>
						<td class="info">都道府県</td>
						<td class="text-left"><%= @user.prefecture %></td>
					</tr>
					<tr>
						<td class="info">メールアドレス</td>
						<td class="text-left"><%= @user.email %></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

<script>

const category_data = {
  labels: [
    <% @categories.each do | category| %>
      '<%= category.category_name %>',
    <% end %>
    ],
  datasets: [
    {
      label: 'カテゴリー表',
      data: [
        <% @categories.each do | category| %>
          '<%= category.target_price %>',
        <% end %>
      ],
    }
  ]
};

const pie_ctx = document.getElementById('pie');
new Chart(pie_ctx, {
    type: 'pie',
    data: category_data,
    options: {
  /*    scales: {
        y: {
          beginAtZero: true
        }
      }
      */
    }
  });

const category_data = {
  labels: [
    <% @expenses.all.each do |expense| %>
      '<%= expense.category.category_name %>',
    <% end %>
    ],
  datasets: [
    {
      label: '金額',
      data: [
        <% @expenses.each do |expense| %>
          '<%= expense.price %>',
        <% end %>
      ],
    }
  ]
};

const elements  = document.getElementsByClassName('chart');
new Chart(pie_ctx, {
    type: 'pie',
    data: category_data,
    options: {
  /*    scales: {
        y: {
          beginAtZero: true
        }
      }
      */
    }
  });


</script>