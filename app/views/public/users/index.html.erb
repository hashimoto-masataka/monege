<h2>Follow Users</h2>
<% if @users.exists? %>
  <%= render 'public/users/index',users: @users %>
<% else %>
  <p>ユーザーはいません</p>
<% end %>

<script>

const category_data = {
  labels: [
    <% @users.each do |user| %>
     <% user.categories.each do | category| %>
      '<%= category.category_name %>',
    <% end %>
    <% end %>
    ],
  datasets: [
    {
      label: 'カテゴリー表',
      data: [
        <% @users.each do |user| %>
           <% user.categories.each do | category| %>
            '<%= category.target_price %>',
           <% end %>
        <% end %>
      ],
    }
  ]
};

const elements = document.getElementsByClassName('pie');
for(let i = 0; i < elements.length; i++) {
  new Chart(elements[i], {
      type: 'pie',
      data: category_data,
      options: {
    /*    scales: {
          y: {
            beginAtZero: true
          }
        }
        */
      }
    });
}

</script>